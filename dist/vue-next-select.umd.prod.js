!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?module.exports=l(require("vue")):"function"==typeof define&&define.amd?define(["vue"],l):(e="undefined"!=typeof globalThis?globalThis:e||self).VueNextSelect=l(e.Vue)}(this,(function(e){"use strict";var l={inheritAttrs:!1,name:"vue-input",props:{modelValue:{required:!0,type:String},placeholder:{required:!0,type:String},disabled:{required:!0,type:Boolean},tabindex:{required:!0,type:Number},autofocus:{required:!0,type:Boolean}},emits:["update:modelValue","input","change","focus","blur","escape"],setup(l,o){const a=e.ref(null);return e.onMounted(()=>{l.autofocus&&a.value.focus()}),{handleInput:e=>{o.emit("input",e),o.emit("update:modelValue",e.target.value)},handleChange:e=>{o.emit("change",e),o.emit("update:modelValue",e.target.value)},handleFocus:e=>{o.emit("focus",e)},handleBlur:e=>{o.emit("blur",e)},input:a,handleEscape:e=>{a.value.blur(),o.emit("escape",e)}}}};const o={class:"vue-input"};l.render=function(l,a,t,n,u,i){return e.openBlock(),e.createBlock("div",o,[e.renderSlot(l.$slots,"prepend"),e.createVNode("input",{ref:"input",modelValue:t.modelValue,placeholder:t.placeholder,disabled:t.disabled,onInput:a[1]||(a[1]=(...e)=>n.handleInput(...e)),onChange:a[2]||(a[2]=(...e)=>n.handleChange(...e)),onFocus:a[3]||(a[3]=(...e)=>n.handleFocus(...e)),onBlur:a[4]||(a[4]=(...e)=>n.handleBlur(...e)),onKeyup:a[5]||(a[5]=e.withKeys(e.withModifiers((...e)=>n.handleEscape(...e),["exact"]),["esc"])),tabindex:t.tabindex,autofocus:t.autofocus},null,40,["modelValue","placeholder","disabled","tabindex","autofocus"]),e.renderSlot(l.$slots,"append")])},l.__file="src/components/input.vue";var a={name:"vue-tags",props:{modelValue:{required:!0,type:Array,validator:e=>e.every(e=>void 0!==typeof e.key&&void 0!==e.label&&"boolean"==typeof e.selected)}},emits:["click"],setup:(e,l)=>({handleClick:(e,o)=>{l.emit("click",e,o)}})};a.render=function(l,o,a,t,n,u){return e.openBlock(),e.createBlock("ul",{class:"vue-tags",onMousedown:o[1]||(o[1]=e.withModifiers(()=>{},["prevent"]))},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(a.modelValue,o=>(e.openBlock(),e.createBlock("li",{key:o.key,onClick:e=>t.handleClick(e,o),class:["vue-tag",{selected:o.selected}]},[e.renderSlot(l.$slots,"default",{option:o},()=>[e.createVNode("span",null,e.toDisplayString(o.label),1)])],10,["onClick"]))),128))],32)},a.__file="src/components/tag.vue";var t={inheritAttrs:!1,name:"vue-dropdown",props:{modelValue:{required:!0,type:Array,validator:e=>e.every(e=>void 0!==typeof e.key&&void 0!==e.label&&"boolean"==typeof e.selected)}},emits:["click"],setup:(e,l)=>({handleClick:(e,o)=>{l.emit("click",e,o)}})};t.render=function(l,o,a,t,n,u){return e.openBlock(),e.createBlock("ul",{class:"vue-dropdown",onMousedown:o[1]||(o[1]=e.withModifiers(()=>{},["prevent"]))},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(a.modelValue,o=>(e.openBlock(),e.createBlock("li",{key:o.key,onClick:e=>t.handleClick(e,o),class:["vue-dropdown-item",{selected:o.selected}]},[e.renderSlot(l.$slots,"default",{option:o},()=>[e.createVNode("span",null,e.toDisplayString(o.label),1)])],10,["onClick"]))),128))],32)},t.__file="src/components/dropdown.vue";const n=(e,l,{valueBy:o})=>o(e)===o(l),u=(e,l,{valueBy:o})=>void 0!==e.find(e=>n(e,l,{valueBy:o})),i=(e,l,{valueBy:o})=>e.find(e=>o(e)===l),c=(e,l,{max:o,valueBy:a})=>u(e,l,{valueBy:a})||e.length+1>o?e:e.concat(l),d=(e,l,{min:o,valueBy:a})=>!1===u(e,l,{valueBy:a})||e.length-1<o?e:e.filter(e=>!1===n(e,l,{valueBy:a}));var r={name:"vue-select",inheritAttrs:!1,props:{modelValue:{required:!0},options:{required:!0,type:Array},visibleOptions:{type:Array},allowEmpty:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},min:{default:0,type:Number},max:{default:1/0,type:Number},closeOnSelect:{default:!1,type:Boolean},trackBy:{type:[String,Function]},hideSelected:{default:!1,type:Boolean},labelBy:{type:[String,Function]},valueBy:{type:[String,Function]},disabled:{default:!1,type:Boolean},loading:{default:!1,type:Boolean},placeholder:{default:"Select option",type:String},searchPlaceholder:{default:"Type to search",type:String},searchable:{default:!1,type:Boolean},taggable:{default:!1,type:Boolean},collapseTags:{default:!1,type:Boolean},tabindex:{default:0,type:Number},autofocus:{default:!1,type:Boolean}},emits:["update:modelValue","select","remove","open","close","search-input","search-change","focus","blur"],setup(l,o){const{trackBy:a,labelBy:t,valueBy:n,min:r,max:s}=(e=>({trackBy:"function"==typeof e.trackBy?e.trackBy:"string"==typeof e.trackBy?l=>e.trackBy.split(".").reduce((e,l)=>e[l],l):e=>e,labelBy:"function"==typeof e.labelBy?e.labelBy:"string"==typeof e.labelBy?l=>e.labelBy.split(".").reduce((e,l)=>e[l],l):e=>e,valueBy:"function"==typeof e.valueBy?e.valueBy:"string"==typeof e.valueBy?l=>e.valueBy.split(".").reduce((e,l)=>e[l],l):e=>e,min:e.multiple?e.min:e.allowEmpty?0:1,max:e.multiple?e.max:1}))(l),p=e.ref(null),m=e.ref(null),v=e.ref(!1);e.watch(()=>v.value,()=>{v.value?(o.emit("open"),l.searchable&&o.emit("focus"),m.value&&m.value._.refs.input!==document.activeElement&&m.value._.refs.input.focus()):(m.value&&m.value._.refs.input===document.activeElement&&m.value._.refs.input.blur(),l.searchable&&o.emit("blur"),o.emit("close"))});const y=()=>{l.disabled||(v.value=!0)},g=e=>{v.value=!1},h=e.ref(""),f=e.ref([]);if(l.multiple)l.modelValue.forEach(e=>{const o=i(l.options,e,{valueBy:n});f.value=c(f.value,o,{max:1/0,valueBy:n})});else if(null!==l.modelValue){const e=i(l.options,l.modelValue,{valueBy:n});f.value=c(f.value,e,{max:1/0,valueBy:n})}const B=(e,a)=>{if(!l.disabled){if(a=a.originalOption,u(f.value,a,{valueBy:n}))f.value=d(f.value,a,{min:r,valueBy:n}),o.emit("remove",a);else{if(!l.multiple){const e=f.value[0];f.value=d(f.value,f.value[0],{min:0,valueBy:n}),o.emit("remove",e)}f.value=c(f.value,a,{max:s,valueBy:n}),o.emit("select",a)}!0===l.closeOnSelect&&(v.value=!1)}};e.watch(()=>f,()=>{const e=f.value.map(e=>n(e));l.multiple?o.emit("update:modelValue",e):e.length?o.emit("update:modelValue",e[0]):o.emit("update:modelValue",null)},{deep:!0});const b=e.computed(()=>{const e=new Set(f.value.map(e=>n(e)));return(l.visibleOptions||l.options).filter(o=>!l.hideSelected||!1===e.has(n(o))).map(l=>({key:a(l),label:t(l),selected:e.has(n(l)),originalOption:l}))}),k=e.computed(()=>{const e=new Set(f.value.map(e=>n(e)));return l.options.map(l=>({key:a(l),label:t(l),selected:e.has(n(l)),originalOption:l}))});return e.watch(()=>l.options,()=>{const e=new Set(f.value.map(e=>e.value));f.value=l.options.filter(l=>e.has(n(l)))},{deep:!0}),{isFocusing:v,wrapper:p,input:m,focus:y,blur:g,toggle:e=>{v.value=!v.value},searchingInputValue:h,handleInputForInput:e=>{o.emit("search-input",e)},handleChangeForInput:e=>{o.emit("search-change",e)},handleFocusForInput:e=>{y()},handleBlurForInput:e=>{g()},handleClickForDropdown:(e,l)=>B(0,l),handleClickForTag:(e,l)=>B(0,l),dropdownSelectedOptions:b,tagSelectedOptions:k,addOrRemoveOption:B}},components:{VInput:l,VTag:a,VDropdown:t}};const s={class:"vue-select-header"},p={key:0,class:"vue-input"},m={key:1,class:"icon loading"},v=e.createVNode("div",null,null,-1),y=e.createVNode("div",null,null,-1),g=e.createVNode("div",null,null,-1),h={key:0,class:"icon loading"},f=e.createVNode("div",null,null,-1),B=e.createVNode("div",null,null,-1),b=e.createVNode("div",null,null,-1);return r.render=function(l,o,a,t,n,u){const i=e.resolveComponent("v-tag"),c=e.resolveComponent("v-input"),d=e.resolveComponent("v-dropdown");return e.openBlock(),e.createBlock("div",{ref:"wrapper",class:["vue-select",{disabled:a.disabled}],tabindex:t.isFocusing?-1:a.tabindex,onFocus:o[8]||(o[8]=(...e)=>t.focus(...e)),onBlur:o[9]||(o[9]=()=>!a.searchable&&t.blur())},[e.createVNode("div",s,[a.multiple&&a.taggable&&0===a.modelValue.length||!1===a.searchable&&!1===a.taggable?(e.openBlock(),e.createBlock("div",p,[e.createVNode("input",{placeholder:a.placeholder,disabled:""},null,8,["placeholder"])])):e.createCommentVNode("v-if",!0),a.multiple&&a.taggable?(e.openBlock(),e.createBlock(e.Fragment,{key:1},[e.createVNode(i,{modelValue:t.tagSelectedOptions,class:["vue-select-tag",{collapsed:a.collapseTags}]},{default:e.withCtx(({option:o})=>[e.renderSlot(l.$slots,"tag",{option:o.originalOption},()=>[e.createVNode("span",null,e.toDisplayString(o.label),1),e.createVNode("img",{src:"data:image/svg+xml;base64,PHN2ZyBpZD0iZGVsZXRlIiBkYXRhLW5hbWU9ImRlbGV0ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHRpdGxlPmRlbGV0ZTwvdGl0bGU+PHBhdGggZD0iTTI1NiwyNEMzODMuOSwyNCw0ODgsMTI4LjEsNDg4LDI1NlMzODMuOSw0ODgsMjU2LDQ4OCwyNC4wNiwzODMuOSwyNC4wNiwyNTYsMTI4LjEsMjQsMjU2LDI0Wk0wLDI1NkMwLDM5Ny4xNiwxMTQuODQsNTEyLDI1Niw1MTJTNTEyLDM5Ny4xNiw1MTIsMjU2LDM5Ny4xNiwwLDI1NiwwLDAsMTE0Ljg0LDAsMjU2WiIgZmlsbD0iIzViNWI1ZiIvPjxwb2x5Z29uIHBvaW50cz0iMzgyIDE3Mi43MiAzMzkuMjkgMTMwLjAxIDI1NiAyMTMuMjkgMTcyLjcyIDEzMC4wMSAxMzAuMDEgMTcyLjcyIDIxMy4yOSAyNTYgMTMwLjAxIDMzOS4yOCAxNzIuNzIgMzgyIDI1NiAyOTguNzEgMzM5LjI5IDM4MS45OSAzODIgMzM5LjI4IDI5OC43MSAyNTYgMzgyIDE3Mi43MiIgZmlsbD0iIzViNWI1ZiIvPjwvc3ZnPg==",alt:"delete tag",class:"icon delete",onClick:()=>t.addOrRemoveOption(l.$event,o)},null,8,["onClick"])])]),_:1},8,["modelValue","class"]),e.createVNode("span",{class:["icon arrow-downward",{active:t.isFocusing}],onClick:o[1]||(o[1]=(...e)=>t.toggle(...e)),onMousedown:o[2]||(o[2]=e.withModifiers(()=>{},["prevent","stop"]))},null,34)],64)):(e.openBlock(),e.createBlock(e.Fragment,{key:2},[a.searchable?(e.openBlock(),e.createBlock(c,{key:0,ref:"input",modelValue:t.searchingInputValue,"onUpdate:modelValue":o[3]||(o[3]=e=>t.searchingInputValue=e),disabled:a.disabled,placeholder:a.searchPlaceholder,onInput:t.handleInputForInput,onChange:t.handleChangeForInput,onFocus:t.handleFocusForInput,onBlur:t.handleBlurForInput,onEscape:t.blur,autofocus:a.autofocus||a.taggable&&t.isFocusing,tabindex:a.tabindex,class:"vue-select-input"},null,8,["modelValue","disabled","placeholder","onInput","onChange","onFocus","onBlur","onEscape","autofocus","tabindex"])):e.createCommentVNode("v-if",!0),a.loading?(e.openBlock(),e.createBlock("span",m,[v,y,g])):(e.openBlock(),e.createBlock("span",{key:2,class:["icon arrow-downward",{active:t.isFocusing}],onClick:o[4]||(o[4]=(...e)=>t.toggle(...e)),onMousedown:o[5]||(o[5]=e.withModifiers(()=>{},["prevent","stop"]))},null,34))],64))]),t.isFocusing?(e.openBlock(),e.createBlock(e.Fragment,{key:0},[a.multiple&&a.taggable&&a.searchable?(e.openBlock(),e.createBlock(c,{key:0,ref:"input",modelValue:t.searchingInputValue,"onUpdate:modelValue":o[6]||(o[6]=e=>t.searchingInputValue=e),disabled:a.disabled,placeholder:a.searchPlaceholder,onInput:t.handleInputForInput,onChange:t.handleChangeForInput,onFocus:t.handleFocusForInput,onBlur:t.handleBlurForInput,onEscape:t.blur,tabindex:a.tabindex,autofocus:a.autofocus||a.taggable&&t.isFocusing,class:"vue-select-input"},{append:e.withCtx(()=>[a.loading?(e.openBlock(),e.createBlock("span",h,[f,B,b])):e.createCommentVNode("v-if",!0)]),_:1},8,["modelValue","disabled","placeholder","onInput","onChange","onFocus","onBlur","onEscape","tabindex","autofocus"])):e.createCommentVNode("v-if",!0),e.createVNode(d,{modelValue:t.dropdownSelectedOptions,"onUpdate:modelValue":o[7]||(o[7]=e=>t.dropdownSelectedOptions=e),onClick:t.handleClickForDropdown,class:"vue-select-dropdown"},{default:e.withCtx(({option:o})=>[e.renderSlot(l.$slots,"dropdown-item",{option:o.originalOption},()=>[e.createVNode("span",null,e.toDisplayString(o.label),1)])]),_:1},8,["modelValue","onClick"])],64)):e.createCommentVNode("v-if",!0)],42,["tabindex"])},r.__file="src/index.vue",r}));
