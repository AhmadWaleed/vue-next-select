import{ref as e,openBlock as l,createBlock as a,renderSlot as n,createVNode as t,withKeys as o,withModifiers as u,Fragment as i,renderList as s,toDisplayString as d,onMounted as r,onUnmounted as p,watch as c,computed as v,resolveComponent as y,withCtx as m,createCommentVNode as g}from"vue";var h={inheritAttrs:!1,name:"vue-input",props:{modelValue:{required:!0,type:String},placeholder:{required:!0,type:String},disabled:{required:!0,type:Boolean}},setup(l,a){const n=e(null);return{handleInput:e=>{a.emit("input",e),a.emit("update:modelValue",e.target.value)},handleChange:e=>{a.emit("change",e),a.emit("update:modelValue",e.target.value)},handleFocus:e=>{a.emit("focus",e)},handleBlur:e=>{a.emit("blur",e)},input:n,handleEscape:e=>{a.emit("escape",e),n.value.blur()}}}};const I={class:"vue-input"};h.render=function(e,i,s,d,r,p){return l(),a("div",I,[n(e.$slots,"prepend"),t("input",{ref:"input",modelValue:e.modelValue,placeholder:e.placeholder,disabled:e.disabled,onInput:i[1]||(i[1]=(...l)=>e.handleInput(...l)),onChange:i[2]||(i[2]=(...l)=>e.handleChange(...l)),onFocus:i[3]||(i[3]=(...l)=>e.handleFocus(...l)),onBlur:i[4]||(i[4]=(...l)=>e.handleBlur(...l)),onKeyup:i[5]||(i[5]=o(u((...l)=>e.handleEscape(...l),["exact"]),["esc"]))},null,40,["modelValue","placeholder","disabled"]),n(e.$slots,"append")])},h.__file="src/components/input.vue";var f={name:"vue-tag",props:{modelValue:{required:!0,type:Array,validator:e=>e.every(e=>"string"==typeof e.id&&"string"==typeof e.label&&"boolean"==typeof e.active)}},setup:(e,l)=>({handleClick:(e,a)=>{l.emit("click",e,a)}})};const B={class:"vue-tag"};f.render=function(e,o,u,r,p,c){return l(),a("ul",B,[(l(!0),a(i,null,s(e.modelValue,o=>(l(),a("li",{key:o.id,onClick:l=>e.handleClick(l,o),class:["vue-tag-item",{active:o.active,inactive:!o.active}]},[n(e.$slots,"default",{option:o},()=>[t("span",null,d(o.label),1)])],10,["onClick"]))),256))])},f.__file="src/components/tag.vue";var w={inheritAttrs:!1,name:"vue-dropdown",props:{modelValue:{required:!0,type:Array,validator:e=>e.every(e=>"string"==typeof e.id&&"string"==typeof e.label&&"boolean"==typeof e.active)}},setup:(e,l)=>({handleClick:(e,a)=>{l.emit("click",e,a)}})};const M={class:"vue-dropdown"};w.render=function(e,o,u,r,p,c){return l(),a("ul",M,[(l(!0),a(i,null,s(e.modelValue,o=>(l(),a("li",{key:o.id,onClick:l=>e.handleClick(l,o),class:["vue-dropdown-item",{active:o.active,inactive:!o.active}]},[n(e.$slots,"default",{option:o},()=>[t("span",null,d(o.label),1)])],10,["onClick"]))),256))])},w.__file="src/components/dropdown.vue";const b=(e,l,{valueBy:a})=>a(e)===a(l),k=(e,l,{valueBy:a})=>void 0!==e.find(e=>b(e,l,{valueBy:a})),V=(e,l,{valueBy:a})=>e.find(e=>a(e)===l),D=(e,l,{max:a,valueBy:n})=>k(e,l,{valueBy:n})||e.length+1>a?e:e.concat(l);var C={name:"vue-select",inheritAttrs:!1,props:{modelValue:{required:!0},options:{required:!0,type:Array},visibleOptions:{type:Array},allowEmpty:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},min:{default:0,type:Number},max:{default:1/0,type:Number},closeOnSelect:{default:!1,type:Boolean},trackBy:{type:[String,Function]},hideSelected:{default:!1,type:Boolean},labelBy:{type:[String,Function]},valueBy:{type:[String,Function]},disabled:{default:!1,type:Boolean},loading:{default:!1,type:Boolean},placeholder:{default:"Select option",type:String},searchable:{default:!1,type:Boolean},clearOnSelect:{default:!1,type:Boolean},taggable:{default:!1,type:Boolean},ellipsis:{default:!1,type:Boolean}},setup(l,a){const{trackBy:n,labelBy:t,valueBy:o}=(e=>({trackBy:"function"==typeof e.trackBy?e.trackBy:"string"==typeof e.trackBy?l=>e.trackBy.split(".").reduce((e,l)=>e[l],l):e=>e,labelBy:"function"==typeof e.labelBy?e.labelBy:"string"==typeof e.labelBy?l=>e.labelBy.split(".").reduce((e,l)=>e[l],l):e=>e,valueBy:"function"==typeof e.valueBy?e.valueBy:"string"==typeof e.valueBy?l=>e.valueBy.split(".").reduce((e,l)=>e[l],l):e=>e}))(l),u=e(null),{isFocusing:i}=(({wrapperRef:l,ignoreClasses:a=[]})=>{const n=e=>a.some(l=>e.classList.contains(l)),t=e(!1),o=e=>{if(!e)return;if(!e.target)return;let a=e.target;for(;a;){if(n(a))return;if(a===l.value)return void(t.value=!0);a=a.parentElement}t.value=!1};return r(()=>window.addEventListener("click",o)),p(()=>window.removeEventListener("click",o)),{isFocusing:t}})({wrapperRef:u,ignoreClasses:["vue-select-tag","icon-delete"]}),s=e(null);c(()=>i.value,()=>{i.value?a.emit("open"):a.emit("close"),setTimeout(()=>d())});const d=()=>{i.value&&s.value&&s.value._&&s.value._.refs.input.focus()},y=e(""),m=e([]);if(l.multiple)l.modelValue.forEach(e=>{const a=V(l.options,e,{valueBy:o});m.value=D(m.value,a,{max:l.max,valueBy:o})});else{const e=V(l.options,modelValue,{valueBy:o});m.value=D(m.value,e,{max:l.max,valueBy:o})}const g=(e,n)=>{n=V(l.options,n.id,{valueBy:o}),k(m.value,n,{valueBy:o})?(m.value=((e,l,{min:a,valueBy:n})=>!1===k(e,l,{valueBy:n})||e.length-1<a?e:e.filter(e=>!1===b(e,l,{valueBy:n})))(m.value,n,{min:l.min,valueBy:o}),a.emit("remove",n)):(m.value=D(m.value,n,{max:l.max,valueBy:o}),a.emit("select",n))};c(()=>m,()=>{const e=m.value.map(e=>o(e));l.multiple?a.emit("update:modelValue",e):e.length?a.emit("update:modelValue",e[0]):a.emit("update:modelValue",null),d()},{deep:!0});const h=v(()=>{const e=new Set(m.value.map(e=>o(e)));return(l.visibleOptions||l.options).map(l=>({id:n(l),label:t(l),active:e.has(l.value),originalOption:l}))}),I=v(()=>{const e=new Set(m.value.map(e=>o(e)));return l.options.map(l=>({id:n(l),label:t(l),active:e.has(l.value),originalOption:l}))});return c(()=>l.options,()=>{const e=new Set(m.value.map(e=>e.value));m.value=l.options.filter(l=>e.has(o(l)))},{deep:!0}),{isFocusing:i,input:s,wrapper:u,close:()=>{const e=i.value;setTimeout(()=>{!0===e&&(i.value=!1)})},searchingInputValue:y,handleInputForInput:e=>{y.value=e.target.value,a.emit("search-input",e)},handleChangeForInput:e=>{y.value=e.target.value,a.emit("search-change",e)},handleFocusForInput:e=>{a.emit("focus",e)},handleBlurForInput:e=>{a.emit("blur",e)},handleClickForDropdown:(e,l)=>g(0,l),handleClickForTag:(e,l)=>g(0,l),dropdownSelectedOptions:h,tagSelectedOptions:I,addOrRemoveOption:g,focus:d}},components:{VInput:h,VTag:f,VDropdown:w}};const F={class:"vue-select-header"},N={key:2,class:"icon-loading"},O=t("div",null,null,-1),S=t("div",null,null,-1),L=t("div",null,null,-1),T={key:0,class:"icon-loading"},x=t("div",null,null,-1),A=t("div",null,null,-1),E=t("div",null,null,-1);C.render=function(e,o,u,s,r,p){const c=y("v-tag"),v=y("v-input"),h=y("v-dropdown");return l(),a("div",{ref:"wrapper",class:"vue-select",onClick:o[6]||(o[6]=(...l)=>e.focus(...l))},[t("div",F,[e.taggable?(l(),a(i,{key:0},[t(c,{modelValue:e.tagSelectedOptions,class:["vue-select-tag",{ellipsis:e.ellipsis}]},{default:m(({option:l})=>[n(e.$slots,"tag-item",{option:l.originalOption},()=>[t("span",null,d(l.label),1),t("img",{src:"data:image/svg+xml;base64,PHN2ZyBpZD0iZGVsZXRlIiBkYXRhLW5hbWU9ImRlbGV0ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHRpdGxlPmRlbGV0ZTwvdGl0bGU+PHBhdGggZD0iTTI1NiwyNEMzODMuOSwyNCw0ODgsMTI4LjEsNDg4LDI1NlMzODMuOSw0ODgsMjU2LDQ4OCwyNC4wNiwzODMuOSwyNC4wNiwyNTYsMTI4LjEsMjQsMjU2LDI0Wk0wLDI1NkMwLDM5Ny4xNiwxMTQuODQsNTEyLDI1Niw1MTJTNTEyLDM5Ny4xNiw1MTIsMjU2LDM5Ny4xNiwwLDI1NiwwLDAsMTE0Ljg0LDAsMjU2WiIgZmlsbD0iIzViNWI1ZiIvPjxwb2x5Z29uIHBvaW50cz0iMzgyIDE3Mi43MiAzMzkuMjkgMTMwLjAxIDI1NiAyMTMuMjkgMTcyLjcyIDEzMC4wMSAxMzAuMDEgMTcyLjcyIDIxMy4yOSAyNTYgMTMwLjAxIDMzOS4yOCAxNzIuNzIgMzgyIDI1NiAyOTguNzEgMzM5LjI5IDM4MS45OSAzODIgMzM5LjI4IDI5OC43MSAyNTYgMzgyIDE3Mi43MiIgZmlsbD0iIzViNWI1ZiIvPjwvc3ZnPg==",alt:"delete tag",class:"icon-delete",onClick:()=>e.addOrRemoveOption(e.$event,l)},null,8,["onClick"])])]),_:1},8,["modelValue","class"]),t("span",{class:["icon-arrow-downward",{active:e.isFocusing}],onClick:o[1]||(o[1]=(...l)=>e.close(...l))},null,2)],64)):(l(),a(i,{key:1},[e.searchable?t(v,{key:0,ref:"input",modelValue:e.searchingInputValue,"onUpdate:modelValue":o[2]||(o[2]=l=>e.searchingInputValue=l),disabled:e.disabled,placeholder:e.placeholder,onInput:e.handleInputForInput,onChange:e.handleChangeForInput,onFocus:e.handleFocusForInput,onBlur:e.handleBlurForInput,onEscape:e.close,class:"vue-select-input"},null,8,["modelValue","disabled","placeholder","onInput","onChange","onFocus","onBlur","onEscape"]):(l(),a("div",{key:1,ref:"input"},d(e.placeholder),513)),e.loading?(l(),a("span",N,[O,S,L])):(l(),a("span",{key:3,class:["icon-arrow-downward",{active:e.isFocusing}],onClick:o[3]||(o[3]=(...l)=>e.close(...l))},null,2))],64))]),e.isFocusing?(l(),a(i,{key:0},[e.taggable&&e.searchable?t(v,{key:0,ref:"input",modelValue:e.searchingInputValue,"onUpdate:modelValue":o[4]||(o[4]=l=>e.searchingInputValue=l),disabled:e.disabled,placeholder:e.placeholder,onInput:e.handleInputForInput,onChange:e.handleChangeForInput,onFocus:e.handleFocusForInput,onBlur:e.handleBlurForInput,onEscape:e.close,class:"vue-select-input"},{append:m(()=>[e.loading?(l(),a("span",T,[x,A,E])):g("v-if",!0)]),_:1},8,["modelValue","disabled","placeholder","onInput","onChange","onFocus","onBlur","onEscape"]):g("v-if",!0),t(h,{modelValue:e.dropdownSelectedOptions,"onUpdate:modelValue":o[5]||(o[5]=l=>e.dropdownSelectedOptions=l),onClick:e.handleClickForDropdown,class:"vue-select-dropdown"},{default:m(({option:l})=>[n(e.$slots,"dropdown-item",{option:l.originalOption},()=>[t("span",null,d(l.label),1)])]),_:1},8,["modelValue","onClick"])],64)):g("v-if",!0)],512)},C.__file="src/index.vue";export default C;
